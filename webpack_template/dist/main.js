(()=>{"use strict";jQuery(document).ready(function(e){$("#hero-banner-cta").click(function(e){e.preventDefault();e=$(this).data("scroll");e&&$("body, html").animate({scrollTop:$("."+e).position().top},500)});const s=$(".prod-info").clone();$(".prod-blank").clone();$(".cta--addmore").click(function(r){r.preventDefault();var r=$(".prod-infos-wrapper"),a=parseInt($(".prod-info").length);if(!(10<=a)){a++;let e=s;e.attr("data-id",a),e.find(".prod-header span").text(a),r.html(r.html()+e[0].outerHTML)}})}),jQuery(document).ready(function(s){let a=s("#firstName"),n=s("#lastName"),t=s("#dateOfBirth"),o=s("#email"),i=s("#phoneNumber");const l=".form-submit__group";var e=-1!=window.location.href.indexOf("p6-qa");const d=e?"https://vn-2022-da-ref-campaign-11470-stg.azurewebsites.net/api/User/insertUser":"https://vn-2022-da-ref-campaign-11470-prod.azurewebsites.net/api/User/insertUser",p=(e?"1":"0")+"da_gcdm_redemption";function c(e){return/\S+@\S+\.\S+/.test(e)}function u(e){return/(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$/.test(e)}a.on("focusout",function(){a.val()?a.parents(l).removeClass("has-error"):a.parents(l).addClass("has-error")}),n.on("focusout",function(){n.val()?n.parents(l).removeClass("has-error"):n.parents(l).addClass("has-error")}),o.on("focusout",function(){o.val()?0==c(o.val())?o.parents(l).addClass("has-error").find(".form-submit__error span").text("Email không đúng định dạng"):o.parents(l).removeClass("has-error"):o.parents(l).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập email")}),t.on("focusout",function(){t.val()?u(t.val())?t.parents(l).removeClass("has-error"):t.parents(l).addClass("has-error").find(".form-submit__error span").text("Ngày sinh không đúng định dạng"):t.parents(l).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập ngày sinh")}),$("#dateOfBirth").keyup(function(){s("#dateOfBirth").mask("00/00/0000")}),i.on("focusout",function(){this.value.length;let e=i.val(),r=e.substring(0,1),a=e.substring(0,3);i.val()?(i.val(),"0"===r?e=e.substring(1,e.length):"84"===(e="840"===a?e.substring(3,e.length):e).substring(0,2)&&(e=e.substring(2,e.length)),i.val("84"+e.substring(0,9)),i.val()?i.parents(l).removeClass("has-error"):i.parents(l).addClass("has-error").find(".form-submit__error span").text("Số điện thoại không đúng định dạng")):i.parents(l).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập số điện thoại")}),s("#policy").on("change",function(){s("#policy").is(":checked")?s("#policy").parents(l).removeClass("has-error"):s("#policy").parents(l).addClass("has-error")}),s("#receiveEmail").on("change",function(){s("#receiveEmail").is(":checked")?s("#receiveEmail").parents(l).removeClass("has-error"):s("#receiveEmail").parents(l).addClass("has-error")}),s("#jsSubmit").click(function(e){e.preventDefault();var r,e=0;window.location.href;a.val()?a.parents(l).removeClass("has-error"):(a.parents(l).addClass("has-error"),e++),n.val()?n.parents(l).removeClass("has-error"):(n.parents(l).addClass("has-error"),e++),s("#policy").is(":checked")?s("#policy").parents(l).removeClass("has-error"):(s("#policy").parents(l).addClass("has-error"),e++),s("#receiveEmail").is(":checked")?s("#receiveEmail").parents(l).removeClass("has-error"):(s("#receiveEmail").parents(l).addClass("has-error"),e++),o.val()?0==c(o.val())?(o.parents(l).addClass("has-error").find(".form-submit__error span").text("Email không đúng định dạng"),e++):o.parents(l).removeClass("has-error"):(o.parents(l).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập email"),e++),t.val()?u(t.val())?t.parents(l).removeClass("has-error"):(t.parents(l).addClass("has-error").find(".form-submit__error span").text("Ngày sinh không đúng định dạng"),e++):(t.parents(l).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập ngày sinh"),e++),i.val()?(i.val(),i.parents(l).removeClass("has-error")):(i.parents(l).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập số điện thoại"),e++),t.val()||(u(r=t.val())||0==r.length?(t.parents(l).addClass("has-error"),e++):t.parents(l).removeClass("has-error")),e<=0?(s("#jsSubmit").addClass("loading").prop("disabled",!0),grecaptcha.ready(function(){grecaptcha.execute("6LeYzwgfAAAAAH8970TxAt7M0lMefol3WSnlSwIJ",{action:"submit"}).then(function(e){e={FormCode:p,FirstName:s("#firstName").val(),LastName:s("#lastName").val(),BirthDay:s("#dateOfBirth").val(),Email:s("#email").val(),phoneNumber:s("#phoneNumber").val(),ReferrerUrl:window.location.href,grecaptchaToken:e,gender:"",formCode:"default",product:s("#productName").val(),priceRange:s("#productRange").val(),medium:window.location.search.replace("?","")};(new Date).toISOString().split(".")[0],window.location.href,$.ajax({url:d,method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"},data:JSON.stringify({FormCode:e.FormCode,lastName:e.LastName,firstName:e.FirstName,email:e.Email,phoneNumber:e.phoneNumber,gender:e.gender,dateOfBirth:e.BirthDay,url:e.ReferrerUrl,medium:e.medium,gRecaptchaResponse:e.grecaptchaToken,product:e.product,priceRange:e.priceRange}),success:function(e,r,a){if(200==a.status){var s="";if($("#jsSubmit").removeClass("loading").prop("disabled",!1),"success"==a.responseJSON)return $("#popupSuccess").fadeIn(),void document.getElementById("register-form").reset();"invalidToken"!=a.responseJSON&&"invalidData"!=a.responseJSON||(s="Có lỗi xảy ra, vui lòng thử lại!"),"duplicateEmail"==a.responseJSON&&(s="Email này đã được sử dụng, vui lòng kiểm tra lại thông tin!"),"duplicatePhone"==a.responseJSON&&(s="Số điện thoại này đã được sử dụng, vui lòng kiểm tra lại thông tin!"),Swal.fire({icon:"error",text:s,confirmButtonText:"Đồng ý"})}},error:function(e,r,a){Swal.fire({icon:"error",text:"Có lỗi xảy ra, vui lòng thử lại!",confirmButtonText:"Đồng ý"}),s("#jsSubmit").removeClass("loading").prop("disabled",!1)}})})})):s("#jsSubmit").remove("loading").prop("disabled",!1)}),s("#popupSuccess .close-button, #popupSuccess .dimmer, #popupSuccess .cta--close-pu").on("click",function(e){e.preventDefault(),s("#popupSuccess").fadeOut()})})})();