(()=>{"use strict";const e=["AX34R3020WW/SV","AX40R3020WU/SV","AX40R3030WM/SV","AX60R5080WD/SV","DF60R8600CG/SV","DV90M5200QW/SV","DV90T7240BB/SV","DV90T7240BH/SV","DV90TA240AE/SV","DV90TA240AX/SV","MC35R8088LE/SV","MG23K3515AS/SV","MG23K3575AS/SV","MG23T5018CE/SV","MG23T5018CK/SV","MG30T5018CK/SV","MS23K3513AS/SV","RB27N4010BU/SV","RB27N4010S8/SV","RB27N4170BU/SV","RB27N4190BU/SV","RB30N4010BU/SV","RB30N4010S8/SV","RB30N4170BU/SV","RB30N4190BU/SV","RB30N4190BY/SV","RB33T307029/SV","RB33T307055/SV","RF48A4000B4/SV","RF48A4010B4/SV","RF48A4010M9/SV","RF60A91R177/SV","RS62R5001B4/SV","RS62R5001M9/SV","RS64R53012C/SV","RS64R5301B4/SV","RS64T5F01B4/SV","RT19M300BGS/SV","RT20HAR8DBU/SV","RT22FARBDSA/SV","RT22M4032BU/SV","RT22M4032BY/SV","RT22M4040DX/SV","RT25M4032BU/SV","RT29K5532BU/SV","RT29K5532BY/SV","RT32K5932BU/SV","RT32K5932BY/SV","RT32K5932S8/SV","RT35K50822C/SV","RT35K5982BS/SV","RT35K5982DX/SV","RT35K5982S8/SV","RT38K50822C/SV","RT38K5982BS/SV","RT38K5982DX/SV","RT38K5982SL/SV","RT46K6885BS/SV","RZ32T744535/SV","VC18M2120SB/SV","VC18M21M0VN/SV","VC18M3110VB/SV","VCC8835V37/XSV","VCC8836V36/XSV","VR05R5050WK/SV","VR30T85513W/SV","VS03R6523J1/SV","VS15A6031R1/SV","VS15R8544S1/SV","WA10T5260BV/SV","WA10T5260BY/SV","WA11T5260BV/SV","WA12T5360BV/SV","WA12T5360BY/SV","WA16R6380BV/SV","WA22R8870GV/SV","WA85T5160BY/SV","WA90H4200SG/SV","WA90T5260BY/SV","WD10N64FR2X/SV","WD11T734DBX/SV","WD14TP44DSB/SV","WD21T6500GV/SV","WD95J5410AW/SV","WD95K5410OX/SV","WD95T4046CE/SV","WD95T754DBX/SV","WW10T634DLX/SV","WW10TA046AE/SV","WW10TP44DSB/SV","WW10TP44DSH/SV","WW10TP54DSB/SV","WW10TP54DSH/SV","WW12TP94DSB/SV","WW80T3020WW/SV","WW85T4040CE/SV","WW85T4040CX/SV","WW85T554DAW/SV","WW85T554DAX/SV","WW90T3040WW/SV","WW90T634DLE/SV","WW90T634DLN/SV","WW90TP44DSB/SV","WW90TP44DSH/SV","WW90TP54DSB/SV","WW90TP54DSH/SV","WW95T4040CE/SV","WW95TA046AX/SV"];function r(){let e=null;$(".input-seri").each((function(r,t){$(this).bind("blur",(function(){e=!$(this).val()||$(this).val().length<14?($(this).closest(".form-submit__group").addClass("has-error"),!0):($(this).closest(".form-submit__group").removeClass("has-error"),!1)}))}))}function t(){let r=null;$(".input-prodId").each((function(t,s){r=!$(this).val(),function(e,r){var t;function s(e){if(e){for(var r=e,s=0;s<r.length;s++)r[s].classList.remove("autocomplete-active");e[t=(t=t>=e.length?0:t)<0?e.length-1:t].classList.add("autocomplete-active")}}function a(r){for(var t=document.getElementsByClassName("autocomplete-items"),s=0;s<t.length;s++)r!=t[s]&&r!=e&&t[s].parentNode.removeChild(t[s])}e.addEventListener("blur",(function(e){this.value?this.closest(".form-submit__group").classList.remove("has-error"):this.closest(".form-submit__group").classList.add("has-error")})),e.addEventListener("input",(function(s){var n,o,i,l=this.value;if(a(),!l)return!1;for(t=-1,(n=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),n.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(n),i=0;i<r.length;i++)r[i].substr(0,l.length).toUpperCase()==l.toUpperCase()&&((o=document.createElement("DIV")).innerHTML+=r[i],o.innerHTML+="<input type='hidden' value='"+r[i]+"'>",o.addEventListener("click",(function(r){e.value=this.getElementsByTagName("input")[0].value,a()})),n.appendChild(o))})),e.addEventListener("keydown",(function(e){var r=(r=document.getElementById(this.id+"autocomplete-list"))&&r.getElementsByTagName("div");40==e.keyCode?(t++,s(r)):38==e.keyCode?(t--,s(r)):13==e.keyCode&&(e.preventDefault(),-1<t&&r&&r[t].click())})),document.addEventListener("click",(function(e){a(e.target)}))}(s,e)}))}jQuery(document).ready((function(e){const s=$(".prod-info").clone();t(),r(),$("#hero-banner-cta").click((function(e){e.preventDefault(),(e=$(this).data("scroll"))&&$("body, html").animate({scrollTop:$("."+e).position().top},500)})),$(".cta--addmore").click((function(e){e.preventDefault();e=$(".prod-infos-wrapper");var a=parseInt($(".prod-info").length);if(!(10<=a)){a++;let n=s;n.attr("data-id",a),n.find(".prod-header span").text(a),e.html(e.html()+n[0].outerHTML),$(".cta--removeOne").fadeIn(300),t(),r()}})),$(".cta--removeOne").click((function(e){e.preventDefault(),2==$(".prod-info").length?($(".prod-info").eq(1).remove(),$(this).fadeOut(300)):$(".prod-info").eq($(".prod-info").length-1).remove()}))})),jQuery(document).ready((function(e){let r=e("#firstName"),t=e("#lastName"),s=e("#dateOfBirth"),a=e("#email"),n=e("#phoneNumber");const o=".form-submit__group";var i=-1!=window.location.href.indexOf("p6-qa");const l=`https://vn-2022-da-product-redemption-campaign-11473-${i?"stg":"prod"}.azurewebsites.net/api/User/insertUser`,d=(i?"1":"0")+"da_gcdm_redemption";function c(e){return/\S+@\S+\.\S+/.test(e)}function u(e){return/(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$/.test(e)}r.on("focusout",(function(){r.val()?r.parents(o).removeClass("has-error"):r.parents(o).addClass("has-error")})),t.on("focusout",(function(){t.val()?t.parents(o).removeClass("has-error"):t.parents(o).addClass("has-error")})),a.on("focusout",(function(){a.val()?0==c(a.val())?a.parents(o).addClass("has-error").find(".form-submit__error span").text("Email không đúng định dạng"):a.parents(o).removeClass("has-error"):a.parents(o).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập email")})),s.on("focusout",(function(){s.val()?u(s.val())?s.parents(o).removeClass("has-error"):s.parents(o).addClass("has-error").find(".form-submit__error span").text("Ngày sinh không đúng định dạng"):s.parents(o).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập ngày sinh")})),$("#dateOfBirth").keyup((function(){e("#dateOfBirth").mask("00/00/0000")})),n.on("focusout",(function(){this.value.length;let e=n.val(),r=e.substring(0,1),t=e.substring(0,3);n.val()?(n.val(),"0"===r?e=e.substring(1,e.length):"84"===(e="840"===t?e.substring(3,e.length):e).substring(0,2)&&(e=e.substring(2,e.length)),n.val("84"+e.substring(0,9)),n.val()?n.parents(o).removeClass("has-error"):n.parents(o).addClass("has-error").find(".form-submit__error span").text("Số điện thoại không đúng định dạng")):n.parents(o).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập số điện thoại")})),e("#policy").on("change",(function(){e("#policy").is(":checked")?e("#policy").parents(o).removeClass("has-error"):e("#policy").parents(o).addClass("has-error")})),e("#receiveEmail").on("change",(function(){e("#receiveEmail").is(":checked")?e("#receiveEmail").parents(o).removeClass("has-error"):e("#receiveEmail").parents(o).addClass("has-error")})),e("#jsSubmit").click((function(i){i.preventDefault();var p=0;let S="";r.val()?r.parents(o).removeClass("has-error"):(r.parents(o).addClass("has-error"),p++),t.val()?t.parents(o).removeClass("has-error"):(t.parents(o).addClass("has-error"),p++),e("#policy").is(":checked")?e("#policy").parents(o).removeClass("has-error"):(e("#policy").parents(o).addClass("has-error"),p++),e("#receiveEmail").is(":checked")?e("#receiveEmail").parents(o).removeClass("has-error"):(e("#receiveEmail").parents(o).addClass("has-error"),p++),a.val()?0==c(a.val())?(a.parents(o).addClass("has-error").find(".form-submit__error span").text("Email không đúng định dạng"),p++):a.parents(o).removeClass("has-error"):(a.parents(o).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập email"),p++),s.val()?u(s.val())?s.parents(o).removeClass("has-error"):(s.parents(o).addClass("has-error").find(".form-submit__error span").text("Ngày sinh không đúng định dạng"),p++):(s.parents(o).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập ngày sinh"),p++),n.val()?(n.val(),n.parents(o).removeClass("has-error")):(n.parents(o).addClass("has-error").find(".form-submit__error span").text("Vui lòng nhập số điện thoại"),p++),s.val()||(u(i=s.val())||0==i.length?(s.parents(o).addClass("has-error"),p++):s.parents(o).removeClass("has-error")),console.log(p),$(".prod-info").each((function(e,r){let t=$(this).find(".input-prodId"),s=$(this).find(".input-seri"),a=".form-submit__group";t.val()?t.closest(a).removeClass("has-error"):(t.closest(a).addClass("has-error"),p++),!s.val()||s.val().length<14?(s.closest(a).addClass("has-error"),p++):s.closest(a).removeClass("has-error"),S+=t.val()+"::"+s.val()+(e<$(".prod-info").length-1?";":""),console.log(S),console.log(p)})),p<=0?(e("#jsSubmit").addClass("loading").prop("disabled",!0),grecaptcha.ready((function(){grecaptcha.execute("6Le63wsfAAAAAN4smYVhVuJpNZJZxhE1G438sWa4",{action:"submit"}).then((function(r){r={FormCode:d,FirstName:e("#firstName").val(),LastName:e("#lastName").val(),BirthDay:e("#dateOfBirth").val(),Email:e("#email").val(),phoneNumber:e("#phoneNumber").val(),ReferrerUrl:window.location.href,grecaptchaToken:r,gender:"",product:e("#productName").val(),priceRange:e("#productRange").val(),medium:window.location.search.replace("?",""),order:S},(new Date).toISOString().split(".")[0],window.location.href,$.ajax({url:l,method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"},data:JSON.stringify({FormCode:r.FormCode,lastName:r.LastName,firstName:r.FirstName,email:r.Email,phoneNumber:r.phoneNumber,gender:r.gender,dateOfBirth:r.BirthDay,url:r.ReferrerUrl,medium:r.medium,gRecaptchaResponse:r.grecaptchaToken,product:r.product,priceRange:r.priceRange,order:r.order}),success:function(e,r,t){if(200==t.status){var s="";if($("#jsSubmit").removeClass("loading").prop("disabled",!1),"success"==t.responseJSON)return $("#popupSuccess").fadeIn(),document.querySelector("body").classList.add("showPU"),void document.getElementById("register-form").reset();"invalidToken"!=t.responseJSON&&"invalidData"!=t.responseJSON||(s="Có lỗi xảy ra, vui lòng thử lại!"),"duplicateEmail"==t.responseJSON&&(s="Email này đã được sử dụng, vui lòng kiểm tra lại thông tin!"),"duplicatePhone"==t.responseJSON&&(s="Số điện thoại này đã được sử dụng, vui lòng kiểm tra lại thông tin!"),Swal.fire({icon:"error",text:s,confirmButtonText:"Đồng ý"})}},error:function(r,t,s){Swal.fire({icon:"error",text:"Có lỗi xảy ra, vui lòng thử lại!",confirmButtonText:"Đồng ý"}),e("#jsSubmit").removeClass("loading").prop("disabled",!1)}})}))}))):e("#jsSubmit").remove("loading").prop("disabled",!1)})),e("#popupSuccess .close-button, #popupSuccess .dimmer, #popupSuccess .cta--close-pu").on("click",(function(r){document.querySelector("body").classList.remove("showPU"),r.preventDefault(),e("#popupSuccess").fadeOut()}))}))})();